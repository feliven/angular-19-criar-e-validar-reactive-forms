<div class="cadastro-form">
  <div class="cadastro-form__container">
    <div class="cadastro-form__card">
      <h2 class="cadastro-form__title">
        {{ configuracaoDeFormulario.titulo }}
      </h2>

      <p class="cadastro-form__description">
        {{ configuracaoDeFormulario.descricao }}
      </p>

      <form [formGroup]="dadosPessoaisForm" (ngSubmit)="onProximo()">
        @for (campo of configuracaoDeFormulario.campos; track $index) { @if
        (retornaTipoDeCampoFormulario(campo, "text") ||
        retornaTipoDeCampoFormulario(campo, "email")) {
        <div
          class="cadastro-form__field"
          [ngClass]="{ 'cadastro-form__field--half': campo.width === 'half' }"
        >
          <label [for]="campo.formControlName" class="cadastro-form__label">{{
            campo.label
          }}</label>
          <input
            [id]="campo.formControlName"
            [type]="campo.type"
            class="cadastro-form__input"
            [formControlName]="campo.formControlName"
            [placeholder]="campo.placeholder || ''"
          />
        </div>
        } @else if (retornaTipoDeCampoFormulario(campo, "password")) {

        <div
          class="cadastro-form__field"
          [ngClass]="{ 'cadastro-form__field--half': campo.width === 'half' }"
        >
          <label [for]="campo.formControlName" class="cadastro-form__label">{{
            campo.label
          }}</label>
          <input
            [id]="campo.formControlName"
            [type]="campo.type"
            class="cadastro-form__input"
            [formControlName]="campo.formControlName"
          />
        </div>

        } @else if (retornaTipoDeCampoFormulario(campo, "select")) {
        <div
          class="cadastro-form__field"
          [ngClass]="{ 'cadastro-form__field--half': campo.width === 'half' }"
        >
          <label [for]="campo.formControlName" class="cadastro-form__label">{{
            campo.label
          }}</label>
          <select
            [id]="campo.formControlName"
            class="cadastro-form__select"
            [formControlName]="campo.formControlName"
          >
            <option value="" disabled selected>{{ campo.placeholder }}</option>

            @if(campo.formControlName==="estado"){ @for (estado of (estados$ |
            async); track $index) {
            <option [value]="estado.sigla">{{ estado.nome }}</option>
            } } @else if (campo.formControlName==="cidade") { @for (cidade of
            (cidades$ | async); track $index) {
            <option [value]="cidade.nome">{{ cidade.nome }}</option>
            }}
          </select>
        </div>
        } @if ( dadosPessoaisForm.get(campo.formControlName)?.invalid &&
        dadosPessoaisForm.get(campo.formControlName)?.touched) { @for
        (mensagemErro of campo.errorMessages | keyvalue; track $index) { @if
        (dadosPessoaisForm.get(campo.formControlName)?.errors?.[mensagemErro.key])
        {
        <div class="cadastro-form__error">
          <span>{{ mensagemErro.value }}</span>
        </div>
        } } } }

        <div class="cadastro-form__actions">
          <app-button
            text="Anterior"
            type="outline"
            icon="fas fa-arrow-left"
            iconPosition="left"
            (clicked)="onAnterior()"
          >
          </app-button>

          <app-button
            text="PrÃ³ximo"
            type="primary"
            icon="fas fa-arrow-right"
            iconPosition="right"
            [disabled]="dadosPessoaisForm.invalid"
            (clicked)="onProximo()"
          >
          </app-button>
        </div>
      </form>
    </div>
  </div>
</div>
